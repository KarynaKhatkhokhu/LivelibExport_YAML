# LivelibExport

## Краткое описание

Сервис https://www.livelib.ru не предоставляет удобного способа для экспорта прочитанного (как встроенной так и через API), поэтому был сделан отдельный скрипт для этого.

## Obsidian

Obsidian.md -- приложение для заметок. Чтобы иметь возможность просматривать там список прочитанного, достаточно воспользовать скриптом (см. Экспорт книг из LiveLib) и сохранить папку LiveLibExport в хранилище (vault) Obsidian.

Для отображения убедиться, что установлен плагин DataView, после чего создать заметку со следующим скриптом:

  ```dataview
      TABLE WITHOUT ID
          ("![cover|120](" + cover + ")") as Cover,
          file.link AS Title,
          author AS "Author",
          date AS "Date read",
          rating AS "Rating"
      FROM "Books"
      SORT date DESC
  ```

Он будет собирать и отоброжать список (прочитаных) книг:

![readme2.png]

## Списки книг

Он может обработать не только список прочитаного, но и с любым списком книг -- Хочу прочитать, Подборки etc., представленным в формате для печати. Файл нужн просто скачать и переименовать в export.html.

### Пример: подборка в формате "Для печати"

![readme1.png]

## Экспорт книг из LiveLib

- Войти на сайт
- Открыть ссылку вида https://www.livelib.ru/reader/userName/read/print, где userName - ваше имя пользователя
- Скачать текущее содержимое страницы в файл любым методом в файл read.html в папке со скриптом
- Установить python3 (https://www.python.org/downloads/) и pip3 (https://pip.pypa.io/en/stable/installing/)
- Установить зависимость: pip3 install lxml
- Запустить скрипт: python3 export_csv.py или export_yaml.py
- Будет загружен список книг из read.html и начата загрузка информации по ним
- Подождать завершения процесса
- Может потребоваться много времени, т.к. запросы отправляются с интервалом в 90-120 сек чтобы не было проблемы с блокировкой на стороне сервиса (это значение может быть изменено в скрипте, на свой страх и риск)
- Итоговый файл out.csv будет содержать название, ISBN и рейтинг, поставленный книге, а также ссылку на обложку для красивого отображения списка.
- Если для каких-то книг не было найдено ISBN, это будет отображено в логе и можно будет их добавить вручную
- Отсутствующий ISBN означает следующее:
  - Он не указан на странице, тогда можно попробовать его найти в других источниках
  - Его нет в принципе, тогда этот метод экспорта не поможет
  - Есть необработанная ситуация в парсере, тогда можно завести issue здесь с указанием ссылки на страницу
### Для CSV:
- Итоговый файл пригоден для импорта на https://goodreads.com, но потенциально может быть использован и в других случаях

### Для YAML:
- Папку с итоговыми файлами можно использовать в хранилище Obsidian и настроить их отображение, как описано в пункте **Obsidian**.
